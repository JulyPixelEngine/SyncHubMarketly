# Development Dockerfile
FROM eclipse-temurin:17-jdk

WORKDIR /app

# Copy gradle wrapper files
COPY gradle gradle
COPY gradlew gradlew.bat build.gradle settings.gradle ./

# Give execute permission to gradlew (for Linux container)
RUN chmod +x gradlew

# Download dependencies (optional, for faster startup)
RUN ./gradlew dependencies --no-daemon || true

# Copy source code (will be overridden by volume mount)
COPY . .

# Expose Spring Boot port
EXPOSE 8080

# Run bootRun in development mode using wrapper
CMD ["./gradlew", "bootRun", "--no-daemon"]
